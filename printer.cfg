#[include adxlmcu.cfg]
[include cartographer.cfg]
#[include TEST_SPEED.cfg]
[include mainsail.cfg]
[include macros.cfg]
[include K-ShakeTune/*.cfg]
[include moonraker_obico_macros.cfg]
[force_move]
enable_force_move: true

## Include other config files
[include config_backup.cfg]
[include homing.cfg]
[include steppers.cfg]
[include fans.cfg]
[include timelapse.cfg]              # delete # if timelapse.cfg will be used

## Which Probe Are We Using?
#[include bltouch.cfg]
#[include eddy.cfg]



## EXTRUDER ##

[extruder]
step_pin: EBBCan: PD0
dir_pin: EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 5.61               #has to be calibrated by everyone
#gear_ratio: 50:17
full_steps_per_rotation: 200
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: EBBCan: PA3
#control: pid
#pid_kp: 28.937
#pid_ki: 1.295
#pid_kd: 161.688
min_temp: 0
max_temp: 300
max_extrude_only_distance: 500
max_extrude_cross_section: 50.0
pressure_advance: 0.068

[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.650
stealthchop_threshold: 999999

############################################
# Heatbed & Mesh
############################################

[heater_bed]
heater_pin: PB7
sensor_pin: PA0 # TB
sensor_type: ATC Semitec 104GT-2
#control: watermark
min_temp: 0
max_temp: 130

#[z_tilt]
#z_positions:
#    -30,135
#    275,135
#points:
#    60,105
#    245,105
#speed: 140
#horizontal_move_z: 10
#retries: 7
#retry_tolerance: 0.015

#[bed_mesh]
#mesh_min: 15,15
#mesh_max: 201,250
#probe_count: 6,6
#mesh_pps: 2,3
#algorithm: bicubic
#speed: 50

#[output_pin probe_reset_pin]
#pin: PB13

############################################
# Sensors
############################################

[input_shaper]
shaper_freq_x: 47.2
shaper_type_x: ei
shaper_freq_y: 43.8
shaper_type_y: ei

[temperature_sensor CB1]
sensor_type = temperature_mcu
min_temp = 0
max_temp = 90


#[temperature_sensor Chamber]
#sensor_type: NTC10K
#sensor_pin: PF4


[temperature_sensor Toolhead]
sensor_type: temperature_mcu
sensor_mcu: EBBCan
min_temp = 0
max_temp = 130

############################################
# MCU & Printer
############################################

[mcu EBBCan] # EBB 42
canbus_uuid: 5ba4619971a4 #42
#canbus_uuid: a9ce72e0ac55 #36

[mcu] # OCTOPUS PRO 1.1
canbus_uuid: 44c4c32daee6
#serial: /dev/serial/by-id/usb-Klipper_stm32g0b1xx_4800290009504B4633373520-if00

[printer]
kinematics: cartesian
max_velocity: 150
max_accel: 3000  
max_z_velocity: 5
max_z_accel: 100
#max_accel_to_decel: 2000
[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE9, EXP1_2=PE10,
    EXP1_3=PE11, EXP1_4=PE12,
    EXP1_5=PE13, EXP1_6=PE14,    # Slot in the socket on this side
    EXP1_7=PE15, EXP1_8=PB10,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PB14, EXP2_2=PB13,
    EXP2_3=PF7, EXP2_4=PB12,
    EXP2_5=PE7, EXP2_6=PB11,      # Slot in the socket on this side
    EXP2_7=PE8, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PC5

# Enable arcs support
[gcode_arcs]
resolution: 0.1
[exclude_object]

[idle_timeout]
timeout = 43000

[respond]
default_type: echo
default_prefix: 

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: LED_RED_ERROR
[display_status]
[pause_resume]

############################################

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 11.752
#*# pid_ki = 0.808
#*# pid_kd = 42.749
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 72.280
#*# pid_ki = 1.121
#*# pid_kd = 1165.511
#*#
#*# [cartographer model default]
#*# model_coef = 1.1678271408283236,
#*# 	  1.5720218023645816,
#*# 	  0.7165949186747321,
#*# 	  0.2746734353560886,
#*# 	  0.6732393748070529,
#*# 	  1.0271901543145618,
#*# 	  -0.691086389662366,
#*# 	  -1.2228071536047638,
#*# 	  0.6827374049051496,
#*# 	  0.7995969226246833
#*# model_domain = 2.849300823485106e-07,3.27341494704978e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 69.395964
#*# model_offset = 0.00000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.044995, 0.019287, 0.028696, 0.033171, 0.012712, 0.014239, 0.002714, -0.003987, 0.019546, 0.026806, 0.016649, 0.034409, 0.039823, 0.042038, 0.064841, 0.118176, 0.074108, 0.108755, 0.018318, 0.032726
#*# 	0.025401, 0.028151, 0.028611, 0.035296, 0.018670, 0.013286, 0.001301, -0.004250, -0.008467, 0.012642, -0.001966, 0.023869, 0.002645, 0.056544, 0.071970, 0.106020, 0.115863, 0.164928, 0.198234, 0.206717
#*# 	-0.011439, 0.022469, 0.022636, 0.012960, 0.013667, 0.010913, -0.001105, 0.008370, 0.005626, 0.033097, 0.014747, 0.040359, 0.046477, 0.057766, 0.089957, 0.120738, 0.156816, 0.172272, 0.222140, 0.259271
#*# 	0.014115, 0.020456, 0.022154, 0.028046, 0.009182, 0.007293, -0.002728, 0.002424, 0.017183, 0.022893, 0.010853, 0.035467, 0.046682, 0.037359, 0.085459, 0.111057, 0.145878, 0.169886, 0.208838, 0.234697
#*# 	-0.001430, 0.027530, 0.027676, 0.033859, 0.021098, 0.002596, 0.007072, 0.007091, 0.023810, 0.031351, 0.015517, 0.038364, 0.050912, 0.044980, 0.086906, 0.114550, 0.148569, 0.176218, 0.218832, 0.259836
#*# 	0.016098, 0.033020, 0.036651, 0.040257, 0.028422, 0.024042, 0.014145, 0.023671, 0.036607, 0.040023, 0.027142, 0.044595, 0.048658, 0.054739, 0.094310, 0.121504, 0.162149, 0.183308, 0.240865, 0.263320
#*# 	0.050390, 0.034409, 0.070387, 0.064166, 0.049883, 0.047478, 0.035479, 0.038732, 0.065341, 0.050203, 0.039136, 0.057750, 0.059265, 0.063484, 0.096116, 0.123379, 0.157339, 0.184002, 0.224154, 0.272268
#*# 	0.070409, 0.062721, 0.082147, 0.078658, 0.064167, 0.062242, 0.050237, 0.057950, 0.069155, 0.068814, 0.051808, 0.064600, 0.066282, 0.068995, 0.102772, 0.123826, 0.166426, 0.193244, 0.239252, 0.261675
#*# 	0.071516, 0.098430, 0.089704, 0.100578, 0.089512, 0.100030, 0.072579, 0.075713, 0.087684, 0.091529, 0.069063, 0.085996, 0.083544, 0.081475, 0.121319, 0.141556, 0.172810, 0.197422, 0.236353, 0.270958
#*# 	0.108349, 0.110369, 0.117955, 0.116930, 0.102488, 0.103124, 0.090416, 0.094078, 0.107314, 0.105470, 0.082277, 0.092496, 0.084379, 0.084350, 0.116581, 0.143503, 0.173447, 0.199088, 0.241868, 0.270766
#*# 	0.100374, 0.134732, 0.111463, 0.124897, 0.114490, 0.115912, 0.103436, 0.113406, 0.104525, 0.117549, 0.094075, 0.109598, 0.097613, 0.095995, 0.127287, 0.137184, 0.175437, 0.197203, 0.236632, 0.276803
#*# 	0.102631, 0.115324, 0.118759, 0.128205, 0.116369, 0.117200, 0.111307, 0.116463, 0.129554, 0.124315, 0.102908, 0.110614, 0.104385, 0.099490, 0.125863, 0.155783, 0.180471, 0.202703, 0.242660, 0.282292
#*# 	0.103650, 0.143645, 0.129787, 0.137578, 0.143264, 0.130718, 0.121339, 0.132793, 0.135239, 0.128176, 0.112538, 0.124167, 0.111117, 0.107260, 0.138927, 0.146294, 0.187392, 0.206630, 0.241421, 0.278875
#*# 	0.135505, 0.142852, 0.145211, 0.149631, 0.138191, 0.140909, 0.132406, 0.137535, 0.149998, 0.145806, 0.120757, 0.124437, 0.117191, 0.110253, 0.135008, 0.161149, 0.181864, 0.204199, 0.235346, 0.268670
#*# 	0.141135, 0.152693, 0.149316, 0.152605, 0.156506, 0.145372, 0.134968, 0.140499, 0.147689, 0.152856, 0.119876, 0.131202, 0.124871, 0.109456, 0.136051, 0.151514, 0.177803, 0.194233, 0.225603, 0.259476
#*# 	0.165468, 0.167827, 0.164973, 0.176597, 0.160112, 0.158872, 0.150561, 0.154426, 0.166431, 0.162578, 0.136411, 0.139019, 0.133264, 0.115913, 0.140662, 0.160401, 0.186846, 0.201644, 0.229779, 0.256789
#*# 	0.172661, 0.193534, 0.184922, 0.194479, 0.181246, 0.178148, 0.166671, 0.171976, 0.166224, 0.177235, 0.149034, 0.157569, 0.139696, 0.127523, 0.152802, 0.172688, 0.188164, 0.203845, 0.231936, 0.261819
#*# 	0.188041, 0.194239, 0.191462, 0.196950, 0.182947, 0.182624, 0.169356, 0.173192, 0.187341, 0.185566, 0.156400, 0.161939, 0.147194, 0.129031, 0.155332, 0.172508, 0.193319, 0.210613, 0.229820, 0.261418
#*# 	0.201208, 0.206207, 0.205642, 0.202862, 0.195415, 0.183174, 0.182682, 0.186217, 0.196860, 0.193743, 0.167629, 0.176777, 0.159540, 0.135338, 0.164694, 0.170192, 0.198499, 0.212062, 0.238395, 0.260456
#*# 	0.200736, 0.205334, 0.205781, 0.207854, 0.197696, 0.189789, 0.184357, 0.187840, 0.198670, 0.196641, 0.167188, 0.176647, 0.159924, 0.135331, 0.161783, 0.169825, 0.198197, 0.214686, 0.235288, 0.260984
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 35.0
#*# max_x = 210.0
#*# min_y = 95.0
#*# max_y = 245.0
